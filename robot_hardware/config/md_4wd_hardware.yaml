# ============================================================================
# MD Motor 4WD Hardware Interface Parameters
# ============================================================================
#
# Hardware Interface가 사용하는 파라미터들
# 이 파일을 수정하면 C++ 코드나 URDF 수정 없이 설정 변경 가능
#
# [사용법]
# ros2 launch robot_hardware md_4wd_test.launch.py
# 또는 직접 파라미터 오버라이드:
# ros2 launch robot_hardware md_4wd_test.launch.py wheel_radius:=0.06
#
# ============================================================================

md_4wd_hardware:
  ros__parameters:
    # ================================================================
    # 시리얼 통신 설정
    # ================================================================
    
    # 시리얼 포트 경로
    # USB-RS485 변환기 사용 시: /dev/ttyUSB0
    # udev rule 설정 시: /dev/ttyMotor
    port: "/dev/ttyUSB0"
    
    # 통신 속도 (MD 드라이버 기본값: 57600)
    baudrate: 57600
    
    # ================================================================
    # 모터 드라이버 ID 설정
    # ================================================================
    # RS-485 버스에서 각 드라이버 구분용 ID
    # MD 드라이버의 DIP 스위치로 설정
    
    # 전방 드라이버 ID (Front Left, Front Right 제어)
    front_driver_id: 1
    
    # 후방 드라이버 ID (Rear Left, Rear Right 제어)
    rear_driver_id: 2
    
    # MD 프로토콜 ID (기본값 사용 권장)
    id_mdui: 184   # PC(송신자) ID
    id_mdt: 183    # 드라이버(수신자) ID

    # ================================================================
    # 로봇 기구학 파라미터
    # ================================================================
    
    # 휠 반지름 (미터)
    # 실제 휠의 반지름을 측정하여 입력
    wheel_radius: 0.05
    
    # 좌우 휠 간 거리 (미터)
    # 좌측 휠 중심과 우측 휠 중심 사이의 거리
    wheel_separation: 0.3
    
    # 휠베이스 - 전후 축 간 거리 (미터)
    # 전방 축과 후방 축 사이의 거리
    wheelbase: 0.3

    # ================================================================
    # 모터/엔코더 파라미터
    # ================================================================
    
    # 기어비 (감속비)
    # 모터 회전수 / 출력축 회전수
    gear_ratio: 15
    
    # 모터 폴 수 (극 수)
    # BLDC 모터의 자극 수 (일반적으로 짝수)
    poles: 10
    
    # ================================================================
    # 계산된 값 (참고용 - 코드에서 자동 계산)
    # ================================================================
    # PPR (Pulses Per Revolution) = poles × 3 × gear_ratio
    # 예: 10 × 3 × 15 = 450 PPR
    # tick_to_rad = 2π / PPR ≈ 0.01396 rad/tick
